<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <title>Prática — Árvores Binárias</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.24.0/cytoscape.min.js"></script>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    body { font-family: sans-serif; padding: 1rem; }
    #cy_arvore { width: 100%; height: 420px; border: 1px solid #ccc; margin-top: 1rem; }
    .controls { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .controls input { padding:6px; width:120px; }
    .controls button { padding:6px 10px; cursor:pointer; }
    #listaTraverse { margin-top: 1rem; font-weight: bold; }
  </style>
</head>
<body>
  <h2>Prática — Árvores Binárias</h2>

  <div class="controls">
    <input id="valor" placeholder="valor (número ou texto)" />
    <button id="btnInserir">Inserir</button>
    <button id="btnRemover">Remover</button>

    <label>
      Travessia:
      <select id="tipoTraverse">
        <option value="inorder">In-Order</option>
        <option value="preorder">Pre-Order</option>
        <option value="postorder">Post-Order</option>
      </select>
    </label>
    <button id="btnVerTraverse">Ver Travessia</button>

    <button id="btnAtualizar">Atualizar Visual</button>

    <a href="/">Voltar</a>
  </div>

  <div id="listaTraverse"></div>
  <div id="cy_arvore"></div>

  <script src="/static/script.js"></script>
  <script>
    // Chamadas específicas para árvore — essas funções serão adicionadas ao script.js
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof carregarArvore === 'function') carregarArvore();
      document.getElementById('btnInserir').onclick = () => {
        const v = document.getElementById('valor').value;
        fetch('/arvore/insert', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({valor: v})})
          .then(()=> carregarArvore());
      };
      document.getElementById('btnRemover').onclick = () => {
        const v = document.getElementById('valor').value;
        fetch('/arvore/remove', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({valor: v})})
          .then(()=> carregarArvore());
      };
      document.getElementById('btnVerTraverse').onclick = () => {
        const tipo = document.getElementById('tipoTraverse').value;
        fetch(`/arvore/traverse?tipo=${tipo}`)
          .then(r=>r.json())
          .then(j=> {
            document.getElementById('listaTraverse').textContent = 'Lista: ' + j.lista.join(' - ');
          });
      };
      document.getElementById('btnAtualizar').onclick = () => carregarArvore();
    });
  </script>
</body>
</html>
